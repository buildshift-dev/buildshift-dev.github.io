
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Full Stack Developer specializing in AWS Serverless, Python, and modern development workflows">
      
      
        <meta name="author" content="buildshift.dev">
      
      
        <link rel="canonical" href="https://buildshift.dev/blog/category/terraform/">
      
      
      
      
        <link rel="alternate" type="application/rss+xml" title="RSS feed" href="../../../feed_rss_created.xml">
        <link rel="alternate" type="application/rss+xml" title="RSS feed of updated content" href="../../../feed_rss_updated.xml">
      
      <link rel="icon" href="../../../assets/images/favicon.svg">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.16">
    
    
      
        <title>Terraform - buildshift.dev</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.7e37652d.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Inter:300,300i,400,400i,700,700i%7CJetBrains+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Inter";--md-code-font:"JetBrains Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../../assets/css/buildshift.css">
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      
  


  
  

<script id="__analytics">function __md_analytics(){function e(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],e("js",new Date),e("config","G-4SV8ZKYLT1"),document.addEventListener("DOMContentLoaded",(function(){document.forms.search&&document.forms.search.query.addEventListener("blur",(function(){this.value&&e("event","search",{search_term:this.value})}));document$.subscribe((function(){var t=document.forms.feedback;if(void 0!==t)for(var a of t.querySelectorAll("[type=submit]"))a.addEventListener("click",(function(a){a.preventDefault();var n=document.location.pathname,d=this.getAttribute("data-md-value");e("event","feedback",{page:n,data:d}),t.firstElementChild.disabled=!0;var r=t.querySelector(".md-feedback__note [data-md-value='"+d+"']");r&&(r.hidden=!1)})),t.hidden=!1})),location$.subscribe((function(t){e("config","G-4SV8ZKYLT1",{page_path:t.pathname})}))}));var t=document.createElement("script");t.async=!0,t.src="https://www.googletagmanager.com/gtag/js?id=G-4SV8ZKYLT1",document.getElementById("__analytics").insertAdjacentElement("afterEnd",t)}</script>
  
    <script>"undefined"!=typeof __md_analytics&&__md_analytics()</script>
  

    
    
    
  <!-- Font Awesome for icons -->
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
  <!-- Fixed banner styling -->
  <style>
    body { padding-top: 40px !important; }
    .md-header { top: 40px !important; }
    .md-tabs { top: 40px !important; }
  </style>

  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="cyan">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#terraform" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
        <aside class="md-banner">
          <div class="md-banner__inner md-grid md-typeset">
            
            
  <!-- Under Construction Announcement -->
  <div style="background: #000000; text-align: center; padding: 8px 0; position: fixed; top: 0; left: 0; right: 0; z-index: 9999; box-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);">
    <div style="display: flex; align-items: center; justify-content: center; gap: 0.5rem; font-size: 14px; font-weight: 500; color: #ffa500;">
      <i class="fas fa-hard-hat"></i>
      <span>...Under Construction...</span>
    </div>
  </div>

          </div>
          
        </aside>
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../.." title="buildshift.dev" class="md-header__button md-logo" aria-label="buildshift.dev" data-md-component="logo">
      
  <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mNkYPhfDwAChwGA60e6kgAAAABJRU5ErkJggg==" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            buildshift.dev
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Terraform
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="cyan"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="blue" data-md-color-accent="blue"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
          <a href="javascript:void(0)" class="md-search__icon md-icon" title="Share" aria-label="Share" data-clipboard data-clipboard-text="" data-md-component="search-share" tabindex="-1">
            
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91s2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08"/></svg>
          </a>
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/buildshift-dev" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill="currentColor" d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    buildshift-dev
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../" class="md-tabs__link">
        
  
  
    
  
  buildshift.dev Blog

      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="buildshift.dev" class="md-nav__button md-logo" aria-label="buildshift.dev" data-md-component="logo">
      
  <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mNkYPhfDwAChwGA60e6kgAAAABJRU5ErkJggg==" alt="logo">

    </a>
    buildshift.dev
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/buildshift-dev" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill="currentColor" d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    buildshift-dev
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    buildshift.dev Blog
    
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
  <div class="md-content" data-md-component="content">
    <div class="md-content__inner">
      <header class="md-typeset">
        <h1 id="terraform">Terraform</h1>
      </header>
      
        <article class="md-post md-post--excerpt">
  <header class="md-post__header">
    
      <nav class="md-post__authors md-typeset">
        
          <span class="md-author">
            <img src="https://github.com/buildshift-dev.png" alt="BuildShift Developer">
          </span>
        
      </nav>
    
    <div class="md-post__meta md-meta">
      <ul class="md-meta__list">
        <li class="md-meta__item">
          <time datetime="2025-06-18 19:30:00-04:00">Jun 18, 2025</time></li>
        
          <li class="md-meta__item">
            in
            
              <a href="../infrastructure-as-code/" class="md-meta__link">Infrastructure as Code</a>, 
              <a href="./" class="md-meta__link">Terraform</a>, 
              <a href="../devops/" class="md-meta__link">DevOps</a></li>
        
        
          
          <li class="md-meta__item">
            
              7 min read
            
          </li>
        
      </ul>
      
    </div>
  </header>
  <div class="md-post__content md-typeset">
    <h2 id="building-maintainable-infrastructure-how-to-organize-your-terraform-projects"><a class="toclink" href="../../2025/06/18/building-maintainable-infrastructure---how-to-organize-your-terraform-projects/">Building Maintainable Infrastructure: How to Organize Your Terraform Projects</a></h2>
<p>🔗 <strong>GitHub Repository</strong>: Find the complete sample project at <a href="https://github.com/buildshift-dev/tf-tutorial">tf-tutorial</a> 📁</p>
<p>When I first started working with Terraform, my configuration files were essentially one massive main.tf file that contained everything—resources, variables, outputs, all jumbled together. It worked, but as the infrastructure grew, making changes became increasingly risky. A simple update could have unintended consequences elsewhere, and collaborating with teammates was a constant source of merge conflicts.</p>
<p>After several painful refactoring sessions and learning from the community's collective wisdom, I've developed an appreciation for well-structured Terraform projects. Let me share what I've learned about organizing Terraform code in a way that scales with your team and infrastructure needs, using our sample-tf-project as a practical example.</p>
<h3 id="start-with-clear-directory-structure"><a class="toclink" href="../../2025/06/18/building-maintainable-infrastructure---how-to-organize-your-terraform-projects/#start-with-clear-directory-structure">Start with Clear Directory Structure</a></h3>
<p>The foundation of any maintainable Terraform project is its directory structure. Think of it like organizing a kitchen—you wouldn't store your plates with your cleaning supplies. Similarly, different aspects of your infrastructure code deserve their own dedicated spaces.</p>
<p>Our sample-tf-project demonstrates this principle beautifully with its clear separation of concerns:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-28-1" name="__codelineno-28-1" href="#__codelineno-28-1"></a>sample-tf-project/
<a id="__codelineno-28-2" name="__codelineno-28-2" href="#__codelineno-28-2"></a>├── infrastructure/
<a id="__codelineno-28-3" name="__codelineno-28-3" href="#__codelineno-28-3"></a>│   ├── environments/
<a id="__codelineno-28-4" name="__codelineno-28-4" href="#__codelineno-28-4"></a>│   │   └── dev/
<a id="__codelineno-28-5" name="__codelineno-28-5" href="#__codelineno-28-5"></a>│   │       ├── main.tf           # Environment-specific configuration
<a id="__codelineno-28-6" name="__codelineno-28-6" href="#__codelineno-28-6"></a>│   │       ├── variables.tf      # Environment variables
<a id="__codelineno-28-7" name="__codelineno-28-7" href="#__codelineno-28-7"></a>│   │       └── outputs.tf        # Environment outputs
<a id="__codelineno-28-8" name="__codelineno-28-8" href="#__codelineno-28-8"></a>│   └── modules/
<a id="__codelineno-28-9" name="__codelineno-28-9" href="#__codelineno-28-9"></a>│       ├── lambda/
<a id="__codelineno-28-10" name="__codelineno-28-10" href="#__codelineno-28-10"></a>│       │   ├── main.tf           # Lambda module
<a id="__codelineno-28-11" name="__codelineno-28-11" href="#__codelineno-28-11"></a>│       │   ├── variables.tf      # Lambda variables
<a id="__codelineno-28-12" name="__codelineno-28-12" href="#__codelineno-28-12"></a>│       │   └── outputs.tf        # Lambda outputs
<a id="__codelineno-28-13" name="__codelineno-28-13" href="#__codelineno-28-13"></a>│       └── s3/
<a id="__codelineno-28-14" name="__codelineno-28-14" href="#__codelineno-28-14"></a>│           ├── main.tf           # S3 module
<a id="__codelineno-28-15" name="__codelineno-28-15" href="#__codelineno-28-15"></a>│           ├── variables.tf      # S3 variables
<a id="__codelineno-28-16" name="__codelineno-28-16" href="#__codelineno-28-16"></a>│           └── outputs.tf        # S3 outputs
<a id="__codelineno-28-17" name="__codelineno-28-17" href="#__codelineno-28-17"></a>├── src/
<a id="__codelineno-28-18" name="__codelineno-28-18" href="#__codelineno-28-18"></a>│   └── lambda/
<a id="__codelineno-28-19" name="__codelineno-28-19" href="#__codelineno-28-19"></a>│       ├── timestamp_function.py # Python Lambda function code
<a id="__codelineno-28-20" name="__codelineno-28-20" href="#__codelineno-28-20"></a>│       └── requirements.txt      # Python dependencies
<a id="__codelineno-28-21" name="__codelineno-28-21" href="#__codelineno-28-21"></a>└── scripts/
<a id="__codelineno-28-22" name="__codelineno-28-22" href="#__codelineno-28-22"></a>    ├── deploy.sh                 # Deployment script
<a id="__codelineno-28-23" name="__codelineno-28-23" href="#__codelineno-28-23"></a>    └── test-lambda.sh           # Testing script
</code></pre></div>
<p>This separation isn't just about being tidy. When your Lambda function code lives in a dedicated <code>src/lambda/</code> directory rather than being embedded in Terraform files, developers can work on application logic without navigating infrastructure complexity. The Python developers on your team can focus on <code>timestamp_function.py</code> without worrying about Terraform syntax. Similarly, having environment-specific directories like <code>environments/dev/</code> means you can safely experiment in development without accidentally affecting production configurations.</p>
<h3 id="embrace-modular-design"><a class="toclink" href="../../2025/06/18/building-maintainable-infrastructure---how-to-organize-your-terraform-projects/#embrace-modular-design">Embrace Modular Design</a></h3>
<p>Creating reusable modules is where Terraform really shines. Instead of copying and pasting resource definitions across environments, modules let you define infrastructure patterns once and reuse them with different parameters. Think of modules as functions in programming—they accept inputs (variables), perform operations (create resources), and return outputs.</p>
<p>Look at how the sample-tf-project's main.tf file in the dev environment elegantly consumes modules:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-29-1" name="__codelineno-29-1" href="#__codelineno-29-1"></a><span class="c1"># infrastructure/environments/dev/main.tf</span>
<a id="__codelineno-29-2" name="__codelineno-29-2" href="#__codelineno-29-2"></a>
<a id="__codelineno-29-3" name="__codelineno-29-3" href="#__codelineno-29-3"></a><span class="c1"># Create S3 bucket module</span>
<a id="__codelineno-29-4" name="__codelineno-29-4" href="#__codelineno-29-4"></a><span class="kr">module</span><span class="w"> </span><span class="nv">&quot;s3_bucket&quot;</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-29-5" name="__codelineno-29-5" href="#__codelineno-29-5"></a><span class="w">  </span><span class="na">source</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;../../modules/s3&quot;</span>
<a id="__codelineno-29-6" name="__codelineno-29-6" href="#__codelineno-29-6"></a>
<a id="__codelineno-29-7" name="__codelineno-29-7" href="#__codelineno-29-7"></a><span class="w">  </span><span class="na">bucket_name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">var.bucket_name</span>
<a id="__codelineno-29-8" name="__codelineno-29-8" href="#__codelineno-29-8"></a><span class="w">  </span><span class="na">environment</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">var.environment</span>
<a id="__codelineno-29-9" name="__codelineno-29-9" href="#__codelineno-29-9"></a><span class="p">}</span>
<a id="__codelineno-29-10" name="__codelineno-29-10" href="#__codelineno-29-10"></a>
<a id="__codelineno-29-11" name="__codelineno-29-11" href="#__codelineno-29-11"></a><span class="c1"># Create Lambda function module</span>
<a id="__codelineno-29-12" name="__codelineno-29-12" href="#__codelineno-29-12"></a><span class="kr">module</span><span class="w"> </span><span class="nv">&quot;lambda_function&quot;</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-29-13" name="__codelineno-29-13" href="#__codelineno-29-13"></a><span class="w">  </span><span class="na">source</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;../../modules/lambda&quot;</span>
<a id="__codelineno-29-14" name="__codelineno-29-14" href="#__codelineno-29-14"></a>
<a id="__codelineno-29-15" name="__codelineno-29-15" href="#__codelineno-29-15"></a><span class="w">  </span><span class="na">function_name</span><span class="w">        </span><span class="o">=</span><span class="w"> </span><span class="nv">var.lambda_function_name</span>
<a id="__codelineno-29-16" name="__codelineno-29-16" href="#__codelineno-29-16"></a><span class="w">  </span><span class="na">bucket_name</span><span class="w">          </span><span class="o">=</span><span class="w"> </span><span class="nv">module.s3_bucket.bucket_name</span>
<a id="__codelineno-29-17" name="__codelineno-29-17" href="#__codelineno-29-17"></a><span class="w">  </span><span class="na">bucket_arn</span><span class="w">           </span><span class="o">=</span><span class="w"> </span><span class="nv">module.s3_bucket.bucket_arn</span>
<a id="__codelineno-29-18" name="__codelineno-29-18" href="#__codelineno-29-18"></a><span class="w">  </span><span class="na">environment</span><span class="w">          </span><span class="o">=</span><span class="w"> </span><span class="nv">var.environment</span>
<a id="__codelineno-29-19" name="__codelineno-29-19" href="#__codelineno-29-19"></a><span class="w">  </span><span class="na">lambda_source_path</span><span class="w">   </span><span class="o">=</span><span class="w"> </span><span class="nv">var.lambda_source_path</span>
<a id="__codelineno-29-20" name="__codelineno-29-20" href="#__codelineno-29-20"></a><span class="w">  </span><span class="na">lambda_role_name</span><span class="w">     </span><span class="o">=</span><span class="w"> </span><span class="nv">var.lambda_role_name</span>
<a id="__codelineno-29-21" name="__codelineno-29-21" href="#__codelineno-29-21"></a><span class="p">}</span>
</code></pre></div>
<p>Notice how clean this is? The environment configuration doesn't worry about S3 encryption settings or Lambda runtime configurations. Those details are abstracted into the modules. The S3 module in our project encapsulates security best practices automatically:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-30-1" name="__codelineno-30-1" href="#__codelineno-30-1"></a><span class="c1"># infrastructure/modules/s3/main.tf</span>
<a id="__codelineno-30-2" name="__codelineno-30-2" href="#__codelineno-30-2"></a>
<a id="__codelineno-30-3" name="__codelineno-30-3" href="#__codelineno-30-3"></a><span class="kr">resource</span><span class="w"> </span><span class="nc">&quot;aws_s3_bucket&quot;</span><span class="w"> </span><span class="nv">&quot;timestamp_bucket&quot;</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-30-4" name="__codelineno-30-4" href="#__codelineno-30-4"></a><span class="w">  </span><span class="na">bucket</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;${var.bucket_name}-${var.environment}&quot;</span>
<a id="__codelineno-30-5" name="__codelineno-30-5" href="#__codelineno-30-5"></a><span class="p">}</span>
<a id="__codelineno-30-6" name="__codelineno-30-6" href="#__codelineno-30-6"></a>
<a id="__codelineno-30-7" name="__codelineno-30-7" href="#__codelineno-30-7"></a><span class="c1"># Block public access to the S3 bucket</span>
<a id="__codelineno-30-8" name="__codelineno-30-8" href="#__codelineno-30-8"></a><span class="kr">resource</span><span class="w"> </span><span class="nc">&quot;aws_s3_bucket_public_access_block&quot;</span><span class="w"> </span><span class="nv">&quot;timestamp_bucket_pab&quot;</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-30-9" name="__codelineno-30-9" href="#__codelineno-30-9"></a><span class="w">  </span><span class="na">bucket</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">aws_s3_bucket.timestamp_bucket.id</span>
<a id="__codelineno-30-10" name="__codelineno-30-10" href="#__codelineno-30-10"></a>
<a id="__codelineno-30-11" name="__codelineno-30-11" href="#__codelineno-30-11"></a><span class="w">  </span><span class="na">block_public_acls</span><span class="w">       </span><span class="o">=</span><span class="w"> </span><span class="no">true</span>
<a id="__codelineno-30-12" name="__codelineno-30-12" href="#__codelineno-30-12"></a><span class="w">  </span><span class="na">block_public_policy</span><span class="w">     </span><span class="o">=</span><span class="w"> </span><span class="no">true</span>
<a id="__codelineno-30-13" name="__codelineno-30-13" href="#__codelineno-30-13"></a><span class="w">  </span><span class="na">ignore_public_acls</span><span class="w">      </span><span class="o">=</span><span class="w"> </span><span class="no">true</span>
<a id="__codelineno-30-14" name="__codelineno-30-14" href="#__codelineno-30-14"></a><span class="w">  </span><span class="na">restrict_public_buckets</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="no">true</span>
<a id="__codelineno-30-15" name="__codelineno-30-15" href="#__codelineno-30-15"></a><span class="p">}</span>
<a id="__codelineno-30-16" name="__codelineno-30-16" href="#__codelineno-30-16"></a>
<a id="__codelineno-30-17" name="__codelineno-30-17" href="#__codelineno-30-17"></a><span class="c1"># Add server-side encryption</span>
<a id="__codelineno-30-18" name="__codelineno-30-18" href="#__codelineno-30-18"></a><span class="kr">resource</span><span class="w"> </span><span class="nc">&quot;aws_s3_bucket_server_side_encryption_configuration&quot;</span><span class="w"> </span><span class="nv">&quot;timestamp_bucket_encryption&quot;</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-30-19" name="__codelineno-30-19" href="#__codelineno-30-19"></a><span class="w">  </span><span class="na">bucket</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">aws_s3_bucket.timestamp_bucket.id</span>
<a id="__codelineno-30-20" name="__codelineno-30-20" href="#__codelineno-30-20"></a>
<a id="__codelineno-30-21" name="__codelineno-30-21" href="#__codelineno-30-21"></a><span class="w">  </span><span class="nb">rule</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-30-22" name="__codelineno-30-22" href="#__codelineno-30-22"></a><span class="w">    </span><span class="nb">apply_server_side_encryption_by_default</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-30-23" name="__codelineno-30-23" href="#__codelineno-30-23"></a><span class="w">      </span><span class="na">sse_algorithm</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;AES256&quot;</span>
<a id="__codelineno-30-24" name="__codelineno-30-24" href="#__codelineno-30-24"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-30-25" name="__codelineno-30-25" href="#__codelineno-30-25"></a><span class="w">  </span><span class="p">}</span>
<a id="__codelineno-30-26" name="__codelineno-30-26" href="#__codelineno-30-26"></a><span class="p">}</span>
</code></pre></div>
<p>Your S3 module becomes a contract that ensures every S3 bucket in your infrastructure follows the same security and operational standards. When AWS releases new features or your security team updates requirements, you update the module once, and all environments benefit.</p>
<p>The Lambda module similarly encapsulates complexity while exposing just the right parameters:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-31-1" name="__codelineno-31-1" href="#__codelineno-31-1"></a><span class="c1"># infrastructure/modules/lambda/main.tf</span>
<a id="__codelineno-31-2" name="__codelineno-31-2" href="#__codelineno-31-2"></a>
<a id="__codelineno-31-3" name="__codelineno-31-3" href="#__codelineno-31-3"></a><span class="kr">resource</span><span class="w"> </span><span class="nc">&quot;aws_lambda_function&quot;</span><span class="w"> </span><span class="nv">&quot;timestamp_lambda&quot;</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-31-4" name="__codelineno-31-4" href="#__codelineno-31-4"></a><span class="w">  </span><span class="na">filename</span><span class="w">         </span><span class="o">=</span><span class="w"> </span><span class="nv">data.archive_file.lambda_zip.output_path</span>
<a id="__codelineno-31-5" name="__codelineno-31-5" href="#__codelineno-31-5"></a><span class="w">  </span><span class="na">function_name</span><span class="w">    </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;${var.function_name}-${var.environment}&quot;</span>
<a id="__codelineno-31-6" name="__codelineno-31-6" href="#__codelineno-31-6"></a><span class="w">  </span><span class="na">role</span><span class="w">            </span><span class="o">=</span><span class="w"> </span><span class="nv">data.aws_iam_role.lambda_role.arn</span>
<a id="__codelineno-31-7" name="__codelineno-31-7" href="#__codelineno-31-7"></a><span class="w">  </span><span class="na">handler</span><span class="w">         </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;timestamp_function.lambda_handler&quot;</span>
<a id="__codelineno-31-8" name="__codelineno-31-8" href="#__codelineno-31-8"></a><span class="w">  </span><span class="na">source_code_hash</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">data.archive_file.lambda_zip.output_base64sha256</span>
<a id="__codelineno-31-9" name="__codelineno-31-9" href="#__codelineno-31-9"></a><span class="w">  </span><span class="na">runtime</span><span class="w">         </span><span class="o">=</span><span class="w"> </span><span class="nv">var.runtime</span>
<a id="__codelineno-31-10" name="__codelineno-31-10" href="#__codelineno-31-10"></a><span class="w">  </span><span class="na">timeout</span><span class="w">         </span><span class="o">=</span><span class="w"> </span><span class="nv">var.timeout</span>
<a id="__codelineno-31-11" name="__codelineno-31-11" href="#__codelineno-31-11"></a>
<a id="__codelineno-31-12" name="__codelineno-31-12" href="#__codelineno-31-12"></a><span class="w">  </span><span class="nb">environment</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-31-13" name="__codelineno-31-13" href="#__codelineno-31-13"></a><span class="w">    </span><span class="nb">variables</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-31-14" name="__codelineno-31-14" href="#__codelineno-31-14"></a><span class="w">      </span><span class="na">BUCKET_NAME</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">var.bucket_name</span>
<a id="__codelineno-31-15" name="__codelineno-31-15" href="#__codelineno-31-15"></a><span class="w">      </span><span class="na">ENVIRONMENT</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">var.environment</span>
<a id="__codelineno-31-16" name="__codelineno-31-16" href="#__codelineno-31-16"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-31-17" name="__codelineno-31-17" href="#__codelineno-31-17"></a><span class="w">  </span><span class="p">}</span>
<a id="__codelineno-31-18" name="__codelineno-31-18" href="#__codelineno-31-18"></a><span class="p">}</span>
</code></pre></div>
<p>The key is finding the right level of abstraction. Our modules are focused enough to be understandable but flexible enough to handle variations between use cases. The Lambda module accepts parameters for function name and timeout, but it enforces naming conventions (appending the environment) and standard configurations.</p>
<h3 id="environment-management-done-right"><a class="toclink" href="../../2025/06/18/building-maintainable-infrastructure---how-to-organize-your-terraform-projects/#environment-management-done-right">Environment Management Done Right</a></h3>
<p>Each environment should be self-contained with its own state file and variable definitions. This isolation is crucial for safety and sanity. When you run terraform apply in your development environment, you want absolute confidence that production remains untouched.</p>
<p>The sample-tf-project demonstrates this with its environment structure. Each environment gets its own directory under <code>infrastructure/environments/</code>, and you can customize behavior through terraform.tfvars files:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-32-1" name="__codelineno-32-1" href="#__codelineno-32-1"></a><span class="c1"># infrastructure/environments/dev/terraform.tfvars</span>
<a id="__codelineno-32-2" name="__codelineno-32-2" href="#__codelineno-32-2"></a><span class="na">aws_region</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;us-west-2&quot;</span>
<a id="__codelineno-32-3" name="__codelineno-32-3" href="#__codelineno-32-3"></a><span class="na">bucket_name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;my-unique-timestamp-bucket&quot;</span>
<a id="__codelineno-32-4" name="__codelineno-32-4" href="#__codelineno-32-4"></a><span class="na">lambda_function_name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;timestamp-creator&quot;</span>
<a id="__codelineno-32-5" name="__codelineno-32-5" href="#__codelineno-32-5"></a><span class="na">environment</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;dev&quot;</span>
<a id="__codelineno-32-6" name="__codelineno-32-6" href="#__codelineno-32-6"></a><span class="na">lambda_role_name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;TerraformLambdaRole&quot;</span>
</code></pre></div>
<p>This approach makes it obvious what differs between environments and prevents accidental production changes. To extend this to multiple environments, you simply copy the dev directory structure:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-33-1" name="__codelineno-33-1" href="#__codelineno-33-1"></a><span class="c1"># Create staging and production environments</span>
<a id="__codelineno-33-2" name="__codelineno-33-2" href="#__codelineno-33-2"></a>cp<span class="w"> </span>-r<span class="w"> </span>infrastructure/environments/dev<span class="w"> </span>infrastructure/environments/staging
<a id="__codelineno-33-3" name="__codelineno-33-3" href="#__codelineno-33-3"></a>cp<span class="w"> </span>-r<span class="w"> </span>infrastructure/environments/dev<span class="w"> </span>infrastructure/environments/prod
<a id="__codelineno-33-4" name="__codelineno-33-4" href="#__codelineno-33-4"></a>
<a id="__codelineno-33-5" name="__codelineno-33-5" href="#__codelineno-33-5"></a><span class="c1"># Then customize each environment&#39;s terraform.tfvars</span>
</code></pre></div>
<p>The beauty is that each environment maintains its own Terraform state, completely isolated from others. A junior developer experimenting in dev can't accidentally destroy production resources.</p>
<h3 id="automate-with-purpose"><a class="toclink" href="../../2025/06/18/building-maintainable-infrastructure---how-to-organize-your-terraform-projects/#automate-with-purpose">Automate with Purpose</a></h3>
<p>Scripts aren't just conveniences; they're documentation of your processes. The sample-tf-project includes thoughtfully designed automation scripts that make deployment straightforward:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-34-1" name="__codelineno-34-1" href="#__codelineno-34-1"></a><span class="c1"># scripts/deploy.sh usage</span>
<a id="__codelineno-34-2" name="__codelineno-34-2" href="#__codelineno-34-2"></a>./scripts/deploy.sh<span class="w"> </span>dev<span class="w"> </span>init<span class="w">     </span><span class="c1"># Initialize Terraform</span>
<a id="__codelineno-34-3" name="__codelineno-34-3" href="#__codelineno-34-3"></a>./scripts/deploy.sh<span class="w"> </span>dev<span class="w"> </span>plan<span class="w">     </span><span class="c1"># Plan changes</span>
<a id="__codelineno-34-4" name="__codelineno-34-4" href="#__codelineno-34-4"></a>./scripts/deploy.sh<span class="w"> </span>dev<span class="w"> </span>apply<span class="w">    </span><span class="c1"># Apply changes</span>
<a id="__codelineno-34-5" name="__codelineno-34-5" href="#__codelineno-34-5"></a>./scripts/deploy.sh<span class="w"> </span>dev<span class="w"> </span>destroy<span class="w">  </span><span class="c1"># Tear down resources</span>
</code></pre></div>
<p>Look at how the deploy script handles environment management:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-35-1" name="__codelineno-35-1" href="#__codelineno-35-1"></a><span class="ch">#!/bin/bash</span>
<a id="__codelineno-35-2" name="__codelineno-35-2" href="#__codelineno-35-2"></a><span class="c1"># Simplified excerpt from scripts/deploy.sh</span>
<a id="__codelineno-35-3" name="__codelineno-35-3" href="#__codelineno-35-3"></a>
<a id="__codelineno-35-4" name="__codelineno-35-4" href="#__codelineno-35-4"></a><span class="nv">ENVIRONMENT</span><span class="o">=</span><span class="nv">$1</span>
<a id="__codelineno-35-5" name="__codelineno-35-5" href="#__codelineno-35-5"></a><span class="nv">COMMAND</span><span class="o">=</span><span class="nv">$2</span>
<a id="__codelineno-35-6" name="__codelineno-35-6" href="#__codelineno-35-6"></a>
<a id="__codelineno-35-7" name="__codelineno-35-7" href="#__codelineno-35-7"></a><span class="c1"># Navigate to the correct environment directory</span>
<a id="__codelineno-35-8" name="__codelineno-35-8" href="#__codelineno-35-8"></a><span class="nb">cd</span><span class="w"> </span><span class="s2">&quot;infrastructure/environments/</span><span class="si">${</span><span class="nv">ENVIRONMENT</span><span class="si">}</span><span class="s2">&quot;</span>
<a id="__codelineno-35-9" name="__codelineno-35-9" href="#__codelineno-35-9"></a>
<a id="__codelineno-35-10" name="__codelineno-35-10" href="#__codelineno-35-10"></a><span class="c1"># Execute the Terraform command</span>
<a id="__codelineno-35-11" name="__codelineno-35-11" href="#__codelineno-35-11"></a><span class="k">case</span><span class="w"> </span><span class="nv">$COMMAND</span><span class="w"> </span><span class="k">in</span>
<a id="__codelineno-35-12" name="__codelineno-35-12" href="#__codelineno-35-12"></a><span class="w">  </span>init<span class="o">)</span>
<a id="__codelineno-35-13" name="__codelineno-35-13" href="#__codelineno-35-13"></a><span class="w">    </span>terraform<span class="w"> </span>init
<a id="__codelineno-35-14" name="__codelineno-35-14" href="#__codelineno-35-14"></a><span class="w">    </span><span class="p">;;</span>
<a id="__codelineno-35-15" name="__codelineno-35-15" href="#__codelineno-35-15"></a><span class="w">  </span>plan<span class="o">)</span>
<a id="__codelineno-35-16" name="__codelineno-35-16" href="#__codelineno-35-16"></a><span class="w">    </span>terraform<span class="w"> </span>plan
<a id="__codelineno-35-17" name="__codelineno-35-17" href="#__codelineno-35-17"></a><span class="w">    </span><span class="p">;;</span>
<a id="__codelineno-35-18" name="__codelineno-35-18" href="#__codelineno-35-18"></a><span class="w">  </span>apply<span class="o">)</span>
<a id="__codelineno-35-19" name="__codelineno-35-19" href="#__codelineno-35-19"></a><span class="w">    </span>terraform<span class="w"> </span>apply
<a id="__codelineno-35-20" name="__codelineno-35-20" href="#__codelineno-35-20"></a><span class="w">    </span><span class="p">;;</span>
<a id="__codelineno-35-21" name="__codelineno-35-21" href="#__codelineno-35-21"></a><span class="w">  </span><span class="c1"># ... other commands</span>
<a id="__codelineno-35-22" name="__codelineno-35-22" href="#__codelineno-35-22"></a><span class="k">esac</span>
</code></pre></div>
<p>These scripts handle the navigation between directories, ensure the correct environment is targeted, and provide a consistent interface regardless of which environment you're deploying. The test script goes even further, automating Lambda invocation and S3 verification:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-36-1" name="__codelineno-36-1" href="#__codelineno-36-1"></a><span class="c1"># scripts/test-lambda.sh automates testing</span>
<a id="__codelineno-36-2" name="__codelineno-36-2" href="#__codelineno-36-2"></a>./scripts/test-lambda.sh<span class="w"> </span>dev
</code></pre></div>
<p>This investment in automation pays dividends when onboarding new developers or during incident response when every second counts.</p>
<h3 id="security-as-a-foundation"><a class="toclink" href="../../2025/06/18/building-maintainable-infrastructure---how-to-organize-your-terraform-projects/#security-as-a-foundation">Security as a Foundation</a></h3>
<p>Security shouldn't be an afterthought bolted onto your infrastructure. The sample-tf-project demonstrates this principle by building security into the module designs. Look at how the S3 module automatically implements multiple layers of security:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-37-1" name="__codelineno-37-1" href="#__codelineno-37-1"></a><span class="c1"># Versioning for data protection</span>
<a id="__codelineno-37-2" name="__codelineno-37-2" href="#__codelineno-37-2"></a><span class="kr">resource</span><span class="w"> </span><span class="nc">&quot;aws_s3_bucket_versioning&quot;</span><span class="w"> </span><span class="nv">&quot;timestamp_bucket_versioning&quot;</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-37-3" name="__codelineno-37-3" href="#__codelineno-37-3"></a><span class="w">  </span><span class="na">bucket</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">aws_s3_bucket.timestamp_bucket.id</span>
<a id="__codelineno-37-4" name="__codelineno-37-4" href="#__codelineno-37-4"></a><span class="w">  </span><span class="nb">versioning_configuration</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-37-5" name="__codelineno-37-5" href="#__codelineno-37-5"></a><span class="w">    </span><span class="na">status</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;Enabled&quot;</span>
<a id="__codelineno-37-6" name="__codelineno-37-6" href="#__codelineno-37-6"></a><span class="w">  </span><span class="p">}</span>
<a id="__codelineno-37-7" name="__codelineno-37-7" href="#__codelineno-37-7"></a><span class="p">}</span>
<a id="__codelineno-37-8" name="__codelineno-37-8" href="#__codelineno-37-8"></a>
<a id="__codelineno-37-9" name="__codelineno-37-9" href="#__codelineno-37-9"></a><span class="c1"># Lifecycle rules for cost optimization and compliance</span>
<a id="__codelineno-37-10" name="__codelineno-37-10" href="#__codelineno-37-10"></a><span class="kr">resource</span><span class="w"> </span><span class="nc">&quot;aws_s3_bucket_lifecycle_configuration&quot;</span><span class="w"> </span><span class="nv">&quot;timestamp_bucket_lifecycle&quot;</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-37-11" name="__codelineno-37-11" href="#__codelineno-37-11"></a><span class="w">  </span><span class="na">bucket</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">aws_s3_bucket.timestamp_bucket.id</span>
<a id="__codelineno-37-12" name="__codelineno-37-12" href="#__codelineno-37-12"></a>
<a id="__codelineno-37-13" name="__codelineno-37-13" href="#__codelineno-37-13"></a><span class="w">  </span><span class="nb">rule</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-37-14" name="__codelineno-37-14" href="#__codelineno-37-14"></a><span class="w">    </span><span class="na">id</span><span class="w">     </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;timestamp_files_lifecycle&quot;</span>
<a id="__codelineno-37-15" name="__codelineno-37-15" href="#__codelineno-37-15"></a><span class="w">    </span><span class="na">status</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;Enabled&quot;</span>
<a id="__codelineno-37-16" name="__codelineno-37-16" href="#__codelineno-37-16"></a>
<a id="__codelineno-37-17" name="__codelineno-37-17" href="#__codelineno-37-17"></a><span class="w">    </span><span class="nb">expiration</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-37-18" name="__codelineno-37-18" href="#__codelineno-37-18"></a><span class="w">      </span><span class="na">days</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">var.file_retention_days</span>
<a id="__codelineno-37-19" name="__codelineno-37-19" href="#__codelineno-37-19"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-37-20" name="__codelineno-37-20" href="#__codelineno-37-20"></a>
<a id="__codelineno-37-21" name="__codelineno-37-21" href="#__codelineno-37-21"></a><span class="w">    </span><span class="nb">noncurrent_version_expiration</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-37-22" name="__codelineno-37-22" href="#__codelineno-37-22"></a><span class="w">      </span><span class="na">noncurrent_days</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">7</span>
<a id="__codelineno-37-23" name="__codelineno-37-23" href="#__codelineno-37-23"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-37-24" name="__codelineno-37-24" href="#__codelineno-37-24"></a><span class="w">  </span><span class="p">}</span>
<a id="__codelineno-37-25" name="__codelineno-37-25" href="#__codelineno-37-25"></a><span class="p">}</span>
</code></pre></div>
<p>When security is built into the foundation, developers don't need to be security experts to deploy secure infrastructure. Every S3 bucket created through this module automatically gets encryption, public access blocking, versioning, and lifecycle policies.</p>
<p>The project also demonstrates the principle of least privilege with IAM roles. Rather than embedding AWS credentials or creating overly permissive policies, it references a pre-created role with specific permissions:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-38-1" name="__codelineno-38-1" href="#__codelineno-38-1"></a><span class="c1"># Reference the manually created IAM role</span>
<a id="__codelineno-38-2" name="__codelineno-38-2" href="#__codelineno-38-2"></a><span class="kr">data</span><span class="w"> </span><span class="nc">&quot;aws_iam_role&quot;</span><span class="w"> </span><span class="nv">&quot;lambda_role&quot;</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-38-3" name="__codelineno-38-3" href="#__codelineno-38-3"></a><span class="w">  </span><span class="na">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">var.lambda_role_name</span>
<a id="__codelineno-38-4" name="__codelineno-38-4" href="#__codelineno-38-4"></a><span class="p">}</span>
</code></pre></div>
<p>This approach extends beyond individual resources. The modules interact securely, with the Lambda module receiving the S3 bucket ARN from the S3 module output, ensuring proper resource dependencies and access patterns.</p>
<h3 id="real-world-application"><a class="toclink" href="../../2025/06/18/building-maintainable-infrastructure---how-to-organize-your-terraform-projects/#real-world-application">Real-World Application</a></h3>
<p>The sample-tf-project isn't just a toy example—it demonstrates patterns that scale to production workloads. The project creates a Lambda function that generates timestamp files and stores them in S3, but the patterns it establishes work for any AWS infrastructure:</p>
<ul>
<li><strong>Modular design</strong> that promotes reuse across projects</li>
<li><strong>Environment isolation</strong> that prevents costly mistakes</li>
<li><strong>Automated deployment</strong> that reduces human error</li>
<li><strong>Built-in security</strong> that meets compliance requirements</li>
<li><strong>Clear documentation</strong> that onboards new team members quickly</li>
</ul>
<p>🔗 <strong>GitHub Repository</strong>: You can find the complete implementation at [YOUR_GITHUB_REPO_URL_HERE] 📁</p>
<p>The repository includes additional features like CloudFormation templates for IAM role creation, comprehensive testing scripts, and detailed documentation for getting started.</p>
<h3 id="extending-the-structure"><a class="toclink" href="../../2025/06/18/building-maintainable-infrastructure---how-to-organize-your-terraform-projects/#extending-the-structure">Extending the Structure</a></h3>
<p>Once you've mastered the basic structure demonstrated in sample-tf-project, you can extend it for more complex scenarios:</p>
<h4 id="remote-state-management"><a class="toclink" href="../../2025/06/18/building-maintainable-infrastructure---how-to-organize-your-terraform-projects/#remote-state-management">Remote State Management</a></h4>
<p>Add backend configuration for storing Terraform state in S3:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-39-1" name="__codelineno-39-1" href="#__codelineno-39-1"></a><span class="c1"># infrastructure/environments/dev/backend.tf</span>
<a id="__codelineno-39-2" name="__codelineno-39-2" href="#__codelineno-39-2"></a><span class="nb">terraform</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-39-3" name="__codelineno-39-3" href="#__codelineno-39-3"></a><span class="w">  </span><span class="kr">backend</span><span class="w"> </span><span class="nv">&quot;s3&quot;</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-39-4" name="__codelineno-39-4" href="#__codelineno-39-4"></a><span class="w">    </span><span class="na">bucket</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;terraform-state-bucket&quot;</span>
<a id="__codelineno-39-5" name="__codelineno-39-5" href="#__codelineno-39-5"></a><span class="w">    </span><span class="na">key</span><span class="w">    </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;dev/terraform.tfstate&quot;</span>
<a id="__codelineno-39-6" name="__codelineno-39-6" href="#__codelineno-39-6"></a><span class="w">    </span><span class="na">region</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;us-west-2&quot;</span>
<a id="__codelineno-39-7" name="__codelineno-39-7" href="#__codelineno-39-7"></a><span class="w">  </span><span class="p">}</span>
<a id="__codelineno-39-8" name="__codelineno-39-8" href="#__codelineno-39-8"></a><span class="p">}</span>
</code></pre></div>
<h4 id="multi-region-deployments"><a class="toclink" href="../../2025/06/18/building-maintainable-infrastructure---how-to-organize-your-terraform-projects/#multi-region-deployments">Multi-Region Deployments</a></h4>
<p>Extend the module structure to support regional variations:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-40-1" name="__codelineno-40-1" href="#__codelineno-40-1"></a>infrastructure/
<a id="__codelineno-40-2" name="__codelineno-40-2" href="#__codelineno-40-2"></a>├── environments/
<a id="__codelineno-40-3" name="__codelineno-40-3" href="#__codelineno-40-3"></a>│   └── dev/
<a id="__codelineno-40-4" name="__codelineno-40-4" href="#__codelineno-40-4"></a>│       ├── us-west-2/
<a id="__codelineno-40-5" name="__codelineno-40-5" href="#__codelineno-40-5"></a>│       └── eu-west-1/
</code></pre></div>
<h4 id="shared-resources"><a class="toclink" href="../../2025/06/18/building-maintainable-infrastructure---how-to-organize-your-terraform-projects/#shared-resources">Shared Resources</a></h4>
<p>Add a global directory for resources that span environments:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-41-1" name="__codelineno-41-1" href="#__codelineno-41-1"></a>infrastructure/
<a id="__codelineno-41-2" name="__codelineno-41-2" href="#__codelineno-41-2"></a>├── global/
<a id="__codelineno-41-3" name="__codelineno-41-3" href="#__codelineno-41-3"></a>│   ├── iam/
<a id="__codelineno-41-4" name="__codelineno-41-4" href="#__codelineno-41-4"></a>│   └── route53/
<a id="__codelineno-41-5" name="__codelineno-41-5" href="#__codelineno-41-5"></a>├── environments/
<a id="__codelineno-41-6" name="__codelineno-41-6" href="#__codelineno-41-6"></a>└── modules/
</code></pre></div>
<h3 id="looking-forward"><a class="toclink" href="../../2025/06/18/building-maintainable-infrastructure---how-to-organize-your-terraform-projects/#looking-forward">Looking Forward</a></h3>
<p>The sample-tf-project provides a solid foundation for organizing Terraform projects, but remember that the best structure is one that evolves with your needs. Start with the patterns demonstrated in the project:</p>
<ol>
<li><strong>Separate infrastructure, modules, and application code</strong></li>
<li><strong>Create reusable modules with sensible defaults</strong></li>
<li><strong>Isolate environments completely</strong></li>
<li><strong>Automate common workflows</strong></li>
<li><strong>Build security into every component</strong></li>
</ol>
<p>As your infrastructure grows, you'll discover new patterns and optimizations. Perhaps you'll add a module registry, implement policy as code with Sentinel or Open Policy Agent, or integrate with a CI/CD pipeline for automated deployments.</p>
<p>The key is to start with a solid foundation like the one demonstrated in sample-tf-project, then iterate based on your team's needs. Every improvement you make compounds over time, turning infrastructure management from a source of stress into a well-oiled machine.</p>
<p>Remember, organizing Terraform projects well isn't about following rules blindly—it's about creating a structure that makes your team more productive, your infrastructure more reliable, and your applications more secure. The sample-tf-project shows you how to achieve all three goals with a clean, maintainable structure that scales from proof-of-concept to production.</p>
    
  </div>
</article>
      
        <article class="md-post md-post--excerpt">
  <header class="md-post__header">
    
      <nav class="md-post__authors md-typeset">
        
          <span class="md-author">
            <img src="https://github.com/buildshift-dev.png" alt="BuildShift Developer">
          </span>
        
      </nav>
    
    <div class="md-post__meta md-meta">
      <ul class="md-meta__list">
        <li class="md-meta__item">
          <time datetime="2025-05-29 20:45:00-04:00">May 29, 2025</time></li>
        
          <li class="md-meta__item">
            in
            
              <a href="../infrastructure-as-code/" class="md-meta__link">Infrastructure as Code</a>, 
              <a href="./" class="md-meta__link">Terraform</a>, 
              <a href="../devops/" class="md-meta__link">DevOps</a></li>
        
        
          
          <li class="md-meta__item">
            
              4 min read
            
          </li>
        
      </ul>
      
    </div>
  </header>
  <div class="md-post__content md-typeset">
    <h2 id="dont-let-your-terraform-state-file-ruin-your-day-a-hard-learned-lesson"><a class="toclink" href="../../2025/05/29/dont-let-your-terraform-state-file-ruin-your-day---a-hard-learned-lesson/">Don't Let Your Terraform State File Ruin Your Day: A Hard-Learned Lesson</a></h2>
<p>🔗 <strong>GitHub Repository</strong>: Find the complete sample project at <a href="https://github.com/buildshift-dev/tf-tutorial">tf-tutorial</a> 📁</p>
<p>If you've been working with Terraform for any length of time, you've probably experienced that sinking feeling when your state file gets corrupted. I know I have—multiple times, actually. There's nothing quite like running <code>terraform plan</code> and seeing it want to recreate your entire production infrastructure because the state file is out of sync. Trust me, you don't want to be that person explaining to your team why all the servers just disappeared.</p>
<h3 id="the-state-file-your-infrastructures-memory"><a class="toclink" href="../../2025/05/29/dont-let-your-terraform-state-file-ruin-your-day---a-hard-learned-lesson/#the-state-file-your-infrastructures-memory">The State File: Your Infrastructure's Memory</a></h3>
<p>Terraform's state file is essentially your infrastructure's memory. It tracks what resources exist, their current configuration, and how they map to your configuration files. When this file gets corrupted, lost, or out of sync, Terraform loses its ability to manage your infrastructure properly. The result? Chaos.</p>
<p>During my early days learning Terraform, state file corruption got me more times than I care to admit. I'd make a simple change, run <code>terraform apply</code>, and suddenly Terraform would think resources that had been running for weeks didn't exist. Sometimes I'd end up with duplicate resources, orphaned infrastructure, or worse—completely broken deployments that required manual cleanup.</p>
<h3 id="why-cdk-and-cloudformation-might-be-better-for-learning"><a class="toclink" href="../../2025/05/29/dont-let-your-terraform-state-file-ruin-your-day---a-hard-learned-lesson/#why-cdk-and-cloudformation-might-be-better-for-learning">Why CDK and CloudFormation Might Be Better for Learning</a></h3>
<p>For beginners or quick experiments, AWS CDK and CloudFormation actually offer some significant advantages over Terraform:</p>
<ul>
<li><strong>Built-in state management</strong>: CloudFormation handles state automatically through AWS APIs</li>
<li><strong>Easy cleanup</strong>: Deleting a CloudFormation stack removes all associated resources</li>
<li><strong>Rollback capabilities</strong>: Failed deployments automatically roll back to the previous state</li>
<li><strong>Integrated monitoring</strong>: Native AWS integration provides better visibility into deployment status</li>
</ul>
<p>These tools eliminate the state management complexity that trips up many Terraform newcomers. You can focus on learning infrastructure concepts without worrying about state file corruption.</p>
<h3 id="why-terraform-still-rules-for-enterprise"><a class="toclink" href="../../2025/05/29/dont-let-your-terraform-state-file-ruin-your-day---a-hard-learned-lesson/#why-terraform-still-rules-for-enterprise">Why Terraform Still Rules for Enterprise</a></h3>
<p>Despite the learning curve, Terraform remains the gold standard for enterprise infrastructure management:</p>
<ul>
<li><strong>Multi-cloud support</strong>: Manage AWS, Azure, GCP, and other providers with one tool</li>
<li><strong>Rich ecosystem</strong>: Extensive provider library covering virtually every service</li>
<li><strong>Mature tooling</strong>: Better testing, validation, and CI/CD integration</li>
<li><strong>Modularity</strong>: Create reusable, shareable infrastructure components</li>
<li><strong>State management flexibility</strong>: Once mastered, provides powerful deployment strategies</li>
</ul>
<h3 id="getting-state-management-right-the-sample-tf-state-lock-project"><a class="toclink" href="../../2025/05/29/dont-let-your-terraform-state-file-ruin-your-day---a-hard-learned-lesson/#getting-state-management-right-the-sample-tf-state-lock-project">Getting State Management Right: The <code>sample-tf-state-lock</code> Project</a></h3>
<p>The key to avoiding state file disasters is implementing proper remote state management with locking from day one. While there are many approaches to Terraform state management—including enterprise solutions like Terraform Cloud, Terraform Enterprise, Azure DevOps, GitLab CI/CD with remote backends, and HashiCorp Consul—the S3-DynamoDB combination remains one of the most accessible options for learning and experimentation.</p>
<p>This approach is particularly well-suited for Cloud Guru environments and provides a solid foundation for understanding state management concepts without requiring enterprise tooling or complex setup. Our <code>sample-tf-state-lock</code> project demonstrates this with a clean, production-ready structure:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a>sample-tf-state-lock/
<a id="__codelineno-6-2" name="__codelineno-6-2" href="#__codelineno-6-2"></a>├── infrastructure/
<a id="__codelineno-6-3" name="__codelineno-6-3" href="#__codelineno-6-3"></a>│   ├── environments/
<a id="__codelineno-6-4" name="__codelineno-6-4" href="#__codelineno-6-4"></a>│   │   └── dev/
<a id="__codelineno-6-5" name="__codelineno-6-5" href="#__codelineno-6-5"></a>│   │       ├── main.tf           # S3 backend configuration
<a id="__codelineno-6-6" name="__codelineno-6-6" href="#__codelineno-6-6"></a>│   │       ├── variables.tf      
<a id="__codelineno-6-7" name="__codelineno-6-7" href="#__codelineno-6-7"></a>│   │       └── outputs.tf        
<a id="__codelineno-6-8" name="__codelineno-6-8" href="#__codelineno-6-8"></a>│   └── modules/
<a id="__codelineno-6-9" name="__codelineno-6-9" href="#__codelineno-6-9"></a>│       ├── lambda/
<a id="__codelineno-6-10" name="__codelineno-6-10" href="#__codelineno-6-10"></a>│       └── s3/
<a id="__codelineno-6-11" name="__codelineno-6-11" href="#__codelineno-6-11"></a>├── src/
<a id="__codelineno-6-12" name="__codelineno-6-12" href="#__codelineno-6-12"></a>│   └── lambda/
<a id="__codelineno-6-13" name="__codelineno-6-13" href="#__codelineno-6-13"></a>└── scripts/
</code></pre></div>
<p>The magic happens in the backend configuration in <code>infrastructure/environments/dev/main.tf</code>:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a><span class="kr">backend</span><span class="w"> </span><span class="nv">&quot;s3&quot;</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-7-2" name="__codelineno-7-2" href="#__codelineno-7-2"></a><span class="w">  </span><span class="na">bucket</span><span class="w">         </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;cloudguru-terraform-state-767398100921&quot;</span>
<a id="__codelineno-7-3" name="__codelineno-7-3" href="#__codelineno-7-3"></a><span class="w">  </span><span class="na">key</span><span class="w">            </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;sample-tf-state-lock/dev/terraform.tfstate&quot;</span>
<a id="__codelineno-7-4" name="__codelineno-7-4" href="#__codelineno-7-4"></a><span class="w">  </span><span class="na">encrypt</span><span class="w">        </span><span class="o">=</span><span class="w"> </span><span class="no">false</span>
<a id="__codelineno-7-5" name="__codelineno-7-5" href="#__codelineno-7-5"></a><span class="w">  </span><span class="na">dynamodb_table</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;cloudguru-terraform-state-767398100921-lock&quot;</span>
<a id="__codelineno-7-6" name="__codelineno-7-6" href="#__codelineno-7-6"></a><span class="w">  </span><span class="na">region</span><span class="w">         </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;us-east-1&quot;</span>
<a id="__codelineno-7-7" name="__codelineno-7-7" href="#__codelineno-7-7"></a><span class="p">}</span>
</code></pre></div>
<p>This setup provides:</p>
<ol>
<li><strong>Remote storage</strong>: State files stored in S3, not locally</li>
<li><strong>State locking</strong>: DynamoDB prevents concurrent modifications</li>
<li><strong>Environment isolation</strong>: Separate state files for dev/staging/prod</li>
<li><strong>Team collaboration</strong>: Multiple developers can work safely</li>
</ol>
<h3 id="the-three-pillars-of-state-management"><a class="toclink" href="../../2025/05/29/dont-let-your-terraform-state-file-ruin-your-day---a-hard-learned-lesson/#the-three-pillars-of-state-management">The Three Pillars of State Management</a></h3>
<p>Based on painful experience, here are the non-negotiables for Terraform state management:</p>
<p><strong>1. Remote State Storage</strong>: Never store state files locally or in version control. Use S3, Azure Storage, or similar cloud storage with versioning enabled.</p>
<p><strong>2. State Locking</strong>: Always configure state locking (DynamoDB for S3 backend) to prevent multiple users from modifying infrastructure simultaneously.</p>
<p><strong>3. Environment Separation</strong>: Use separate state files for different environments. The last thing you want is a dev deployment accidentally affecting production.</p>
<p>The <code>sample-tf-state-lock</code> project implements all three pillars, creating a foundation that scales from small experiments to enterprise deployments.</p>
<h3 id="making-it-foolproof"><a class="toclink" href="../../2025/05/29/dont-let-your-terraform-state-file-ruin-your-day---a-hard-learned-lesson/#making-it-foolproof">Making It Foolproof</a></h3>
<p>The project includes deployment scripts that make state management transparent:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a>./scripts/deploy.sh<span class="w"> </span>dev<span class="w"> </span>init
<a id="__codelineno-8-2" name="__codelineno-8-2" href="#__codelineno-8-2"></a>./scripts/deploy.sh<span class="w"> </span>dev<span class="w"> </span>apply
</code></pre></div>
<p>These scripts handle the complexity while ensuring proper state management practices. The modular structure means you can extend the pattern to new environments and projects without reinventing the wheel.</p>
<h3 id="dont-learn-the-hard-way"><a class="toclink" href="../../2025/05/29/dont-let-your-terraform-state-file-ruin-your-day---a-hard-learned-lesson/#dont-learn-the-hard-way">Don't Learn the Hard Way</a></h3>
<p>State file corruption will teach you about Terraform state management, but it's a lesson you'd rather avoid. By starting with proper remote state configuration and locking, you can focus on building infrastructure instead of recovering from disasters.</p>
<p>🔗 <strong>GitHub Repository</strong>: The complete example is available at <a href="https://github.com/buildshift-dev/tf-tutorial">tf-tutorial</a> 📁</p>
<p>Use it as a foundation for your own projects, and save yourself the headaches I experienced learning Terraform the hard way.</p>
<p>Remember: your future self will thank you for setting up proper state management from the beginning. Trust me on this one.</p>
    
  </div>
</article>
      
      
        
          



<nav class="md-pagination">
  
</nav>
        
      
    </div>
  </div>

          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2025 buildshift.dev
    </div>
  
  
</div>
      
        <div class="md-social">
  
    
    
    
    
      
      
    
    <a href="https://github.com/buildshift-dev" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill="currentColor" d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://linkedin.com/in/your-profile" target="_blank" rel="noopener" title="linkedin.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill="currentColor" d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3M135.4 416H69V202.2h66.5V416zM102.2 96a38.5 38.5 0 1 1 0 77 38.5 38.5 0 1 1 0-77m282.1 320h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9z"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://twitter.com/your-handle" target="_blank" rel="noopener" title="twitter.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill="currentColor" d="M459.4 151.7c.3 4.5.3 9.1.3 13.6 0 138.7-105.6 298.6-298.6 298.6-59.5 0-114.7-17.2-161.1-47.1 8.4 1 16.6 1.3 25.3 1.3 49.1 0 94.2-16.6 130.3-44.8-46.1-1-84.8-31.2-98.1-72.8 6.5 1 13 1.6 19.8 1.6 9.4 0 18.8-1.3 27.6-3.6-48.1-9.7-84.1-52-84.1-103v-1.3c14 7.8 30.2 12.7 47.4 13.3-28.3-18.8-46.8-51-46.8-87.4 0-19.5 5.2-37.4 14.3-53C87.4 130.8 165 172.4 252.1 176.9c-1.6-7.8-2.6-15.9-2.6-24C249.5 95.1 296.3 48 354.4 48c30.2 0 57.5 12.7 76.7 33.1 23.7-4.5 46.5-13.3 66.6-25.3-7.8 24.4-24.4 44.8-46.1 57.8 21.1-2.3 41.6-8.1 60.4-16.2-14.3 20.8-32.2 39.3-52.6 54.3"/></svg>
    </a>
  
    
    
    
    
    <a href="mailto:contact@buildshift.dev" target="_blank" rel="noopener" title="" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill="currentColor" d="M48 64C21.5 64 0 85.5 0 112c0 15.1 7.1 29.3 19.2 38.4l208 156a48 48 0 0 0 57.6 0l208-156c12.1-9.1 19.2-23.3 19.2-38.4 0-26.5-21.5-48-48-48zM0 196v188c0 35.3 28.7 64 64 64h384c35.3 0 64-28.7 64-64V196L313.6 344.8c-34.1 25.6-81.1 25.6-115.2 0z"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "../../..", "features": ["navigation.tabs", "navigation.sections", "navigation.path", "navigation.top", "search.highlight", "search.share", "search.suggest", "content.code.copy", "content.code.annotate"], "search": "../../../assets/javascripts/workers/search.d50fe291.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../../assets/javascripts/bundle.50899def.min.js"></script>
      
        <script src="https://unpkg.com/mermaid@10.6.1/dist/mermaid.min.js"></script>
      
        <script src="../../../assets/js/buildshift.js"></script>
      
    
  </body>
</html>